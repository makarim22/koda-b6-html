<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="products-review.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200..800&family=Rubik:wght@300..900&display=swap"
      rel="stylesheet"
    />
    <title>Coffee Shop</title>
  </head>

  <body>
       <header class="container">
      <div class="logo">
                <img src="./src/icons/home/Frame.svg" alt="Menu" />
        <img src="./src/icons/home/Logo.svg" alt="Logo" />

      </div>
      <nav class="left-header">
        <a href="home.html">Home</a>
        <a href="product.html">Product</a>
      </nav>
      <nav class="right-header">
        <img src="./src/icons/Search.svg" alt="Search" />
        <img src="./src/icons/ShoppingCart.svg" alt="Cart" />
            <a href="login.html">Sign In</a>
            <a href="register.html">Sign Up</a>
      </nav>
    </header>

    <main class="main-container">

      <div class="recommendations">
        <h3 class="title">Recommendation <strong>For You</strong></h3>
        <div class="recommended-items">
          <div class="recommended-item">
            <img src="./src/detail/snack.png" alt="Recommendation 1" />
            <div class="rec-details">
              <h4>Hazelnut Latte</h4>
              <p>
                You can explore the menu that we provide with fun and have their
                own taste and make your day better.
              </p>
              <p>IDR 10.000</p>
              <button class="buy-button">Buy</button>
            </div>
          </div>
          <div class="recommended-item">
            <img src="./src/detail/latte-cup.png" alt="Recommendation 2" />
            <div class="rec-details">
              <h4>Hazelnut Latte</h4>
              <p>
                You can explore the menu that we provide with fun and have their
                own taste and make your day better.
              </p>
              <p>IDR 10.000</p>
              <button class="buy-button">Buy</button>
            </div>
          </div>
          <div class="recommended-item">
            <img src="./src/detail/latte-cup.png" alt="Recommendation 3" />
            <div class="rec-details">
              <h4>Hazelnut Latte</h4>
              <p>IDR 10.000</p>
              <p>
                You can explore the menu that we provide with fun and have their
                own taste and make your day better.
              </p>
              <button class="buy-button">Buy</button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section about">
                         <img src="./src/icons/coffee-cup.svg">
               <img src="./src/icons/coffee-shop.svg">
          <p>
            Coffee Shop is a store that sells some good meals, and especially
            coffee. We provide high quality beans.
          </p>
          <p>&copy; 2020 CoffeeStore</p>
        </div>
        <div class="footer-section products">
          <h3>Product</h3>
          <ul>
            <li>Our Product</li>
            <li>Pricing</li>
            <li>Locations</li>
            <li>Countries</li>
            <li>Blog</li>
          </ul>
        </div>
        <div class="footer-section engage">
          <h3>Engage</h3>
          <ul>
            <li>Partner</li>
            <li>FAQ</li>
            <li>About Us</li>
            <li>Privacy Policy</li>
            <li>Terms of Service</li>
          </ul>
        </div>
        <div class="footer-section social-media">
          <h3>Social Media</h3>
          <div class="social-icons">
            <img src="./src/icons/Facebook.svg" alt="Facebook" />
            <img src="./src/icons/Twitter.svg" alt="Twitter" />
            <img src="./src/icons/Instagram.png" alt="Instagram" />
          </div>
        </div>
      </div>
    </footer>

<script>
  const currentUrl = window.location.href; 
  console.log('current url', currentUrl);
  
  const url = new URL(currentUrl); 
  console.log('urlnya', url);
  
  const searchParams = url.searchParams; 
  console.log('search param', searchParams);
  
  const id = searchParams.get("id");
  

  console.log("ID retrieved from query string:", id); 

  const productId = parseInt(id); 
  console.log("Product ID as integer:", productId);

  const products = [
    {
      id: 1,
      name: "Espresso",
      description: "A strong and bold coffee drink made by forcing hot water through finely-ground coffee beans.",
      rating: 5,
      isFlashSale: true,
      price: 18000,
      discountedPrice: 15000,
      image: "./src/product/new-item/espresso.jfif",
    },
    {
      id: 2,
      name: "Latte",
      description: "A creamy drink made with espresso and steamed milk, topped with a light layer of froth.",
      rating: 5,
      isFlashSale: true,
      price: 22000,
      discountedPrice: 19000,
      image: "./src/product/new-item/latte.jpg",
    },
    {
      id: 3,
      name: "Mocha",
      description: "A chocolate-flavored variant of a latte, combining espresso, steamed milk, and chocolate syrup.",
      rating: 4,
      isFlashSale: true,
      price: 24000,
      discountedPrice: 21000,
      image: "./src/product/new-item/mocha.jfif",
    },
    {
      id: 4,
      name: "Americano",
      description: "A simple and rich coffee drink made by adding hot water to espresso.",
      rating: 4,
      isFlashSale: false,
      price: 15000,
      discountedPrice: 12000,
      image: "./src/product/new-item/americano.jfif",
    },
    {
      id: 5,
      name: "Flat White",
      description: "A velvety drink similar to a latte, but with a higher ratio of coffee to milk.",
      rating: 4,
      isFlashSale: true,
      price: 23000,
      discountedPrice: 20000,
      image: "./src/product/new-item/flat-white.jfif",
    },
    {
      id: 6,
      name: "Affogato",
      description: "A delightful dessert made with a scoop of vanilla gelato topped with hot espresso.",
      rating: 5,
      isFlashSale: false,
      price: 30000,
      discountedPrice: 25000,
      image: "./src/product/new-item/affogato.jfif",
    },
  ];

  const product = products.find((prod) => prod.id === productId);
  console.log('produknya adalah', product);
  
  if (product) {
    const main = document.querySelector(".main-container");

     const recommendationsDiv = document.querySelector(".recommendations"); 


    const productInfo = document.createElement("div");
    productInfo.setAttribute("class", "product-info");
    main.append(productInfo);


    if (recommendationsDiv) {
      main.insertBefore(productInfo, recommendationsDiv);
    } else {
      main.append(productInfo);
    }

    const imageDisplay = document.createElement("div");
    imageDisplay.setAttribute("class", "image-display");
    productInfo.append(imageDisplay);

    const productImage = document.createElement("img");
    productImage.setAttribute("src", product.image);  
    productImage.setAttribute("alt", product.name);    
    productImage.setAttribute("class", "product-image");
    imageDisplay.append(productImage);

     const productRightSection = document.createElement("div");
    productRightSection.setAttribute("class", "product-right-section"); 
    productInfo.append(productRightSection); 

    const productDetails = document.createElement("div");
    productDetails.setAttribute("class", "product-details");
    productRightSection.append(productDetails);

    const productName = document.createElement("h2");
    productName.textContent = product.name;
    productDetails.append(productName);

    const oldPrice = document.createElement("p");
    oldPrice.setAttribute("class", "old-price");
    oldPrice.textContent = "IDR " + product.price;
    productDetails.append(oldPrice);

    const currentPrice = document.createElement("p");
    currentPrice.setAttribute("class", "current-price");
    currentPrice.textContent = "IDR " + product.discountedPrice;
    productDetails.append(currentPrice);

    const rating = document.createElement("div");
    rating.setAttribute("class", "rating");
    productDetails.append(rating);

    for (let i = 0; i < product.rating; i++) {
      const star = document.createElement("span");
      star.classList.add("star");
      star.textContent = "â˜…";
      rating.append(star);
    }

    const ratingScore = document.createElement("span");
    ratingScore.setAttribute("class", "rating-score");
    ratingScore.textContent = product.rating;
    rating.append(ratingScore);

    const reviews = document.createElement("div");
    reviews.setAttribute("class", "reviews");
    productDetails.append(reviews);

    const reviewCount = document.createElement("span");
    reviewCount.textContent = "200+ Review";
    reviews.append(reviewCount);

    const separator = document.createElement("span");
    separator.textContent = " | ";
    reviews.append(separator);

    const recommendation = document.createElement("span");
    recommendation.textContent = "Recommendation";
    reviews.append(recommendation);

    const recommendationIcon = document.createElement("span");
    recommendationIcon.textContent = "ðŸ‘";
    reviews.append(recommendationIcon);

    const description = document.createElement("p");
    description.textContent = product.description;
    productDetails.append(description);

    const optionsDiv = document.createElement("div");
    optionsDiv.setAttribute("class", "options");
    productRightSection.append(optionsDiv); 
    
    
  const quantityContainer = document.createElement("div");
  quantityContainer.setAttribute("class", "quantity-container");
  productDetails.append(quantityContainer); 

  const minusButton = document.createElement("button");
  minusButton.setAttribute("class", "quantity-button minus");
  minusButton.textContent = "âˆ’";
  quantityContainer.append(minusButton);

  const quantityInput = document.createElement("input");
  quantityInput.setAttribute("type", "number");
  quantityInput.setAttribute("class", "quantity-input");
  quantityInput.setAttribute("value", "1");
  quantityInput.setAttribute("min", "1");
  quantityContainer.append(quantityInput);

  const plusButton = document.createElement("button");
  plusButton.setAttribute("class", "quantity-button plus");
  plusButton.textContent = "+";
  quantityContainer.append(plusButton);

  minusButton.addEventListener("click", () => {
    let currentQuantity = parseInt(quantityInput.value);
    if (currentQuantity > 1) {
      quantityInput.value = currentQuantity - 1;
    }
  });

  plusButton.addEventListener("click", () => {
    let currentQuantity = parseInt(quantityInput.value);
    quantityInput.value = currentQuantity + 1;
  });

  quantityInput.addEventListener("change", () => {
    let currentQuantity = parseInt(quantityInput.value);
    if (isNaN(currentQuantity) || currentQuantity < 1) {
      quantityInput.value = 1; 
    }
  });

    const sizeHeading = document.createElement("h4");
    sizeHeading.textContent = "Choose Size";
    optionsDiv.append(sizeHeading);

    const sizeOptionsDiv = document.createElement("div");
    sizeOptionsDiv.setAttribute("class", "size-options");
    optionsDiv.append(sizeOptionsDiv);

    const regularButton = document.createElement("button");
    regularButton.setAttribute("class", "size-button active");
    regularButton.textContent = "Regular";
    sizeOptionsDiv.append(regularButton);

    const mediumButton = document.createElement("button");
    mediumButton.setAttribute("class", "size-button");
    mediumButton.textContent = "Medium";
    sizeOptionsDiv.append(mediumButton);

    const largeButton = document.createElement("button");
    largeButton.setAttribute("class", "size-button");
    largeButton.textContent = "Large";
    sizeOptionsDiv.append(largeButton);

    const hotIceHeading = document.createElement("h4");
    hotIceHeading.textContent = "Hot/Ice?";
    optionsDiv.append(hotIceHeading);

    const hotIceOptionsDiv = document.createElement("div");
    hotIceOptionsDiv.setAttribute("class", "hot-ice-options");
    optionsDiv.append(hotIceOptionsDiv);

    const iceButton = document.createElement("button");
    iceButton.setAttribute("class", "ice-button");
    iceButton.textContent = "Ice";
    hotIceOptionsDiv.append(iceButton);

    const hotButton = document.createElement("button");
    hotButton.setAttribute("class", "hot-button");
    hotButton.textContent = "Hot";
    hotIceOptionsDiv.append(hotButton);

    const buyOptionsDiv = document.createElement("div");
    buyOptionsDiv.setAttribute("class", "buy-options");
    buyOptionsDiv.style.marginTop = "20px";
    optionsDiv.append(buyOptionsDiv);

    const buyButton = document.createElement("button");
    buyButton.setAttribute("class", "buy-button");
    buyButton.textContent = "Buy";
    buyOptionsDiv.append(buyButton);

    const addToCartButton = document.createElement("button");
    addToCartButton.setAttribute("class", "add-to-cart-button");
    addToCartButton.textContent = "Add to Cart"; 
    buyOptionsDiv.append(addToCartButton);

    const regularbtn = document.querySelector(".regular-button");
    const mediumbtn = document.querySelector(".medium-button");
    const largebtn = document.querySelector(".large-button");
    const icebtn = document.querySelector(".ice-button");
    const hotbtn = document.querySelector(".hot-button");
    const buybtn = document.querySelector(".buy-button");
    const addtocartbtn = document.querySelector(".add-to-cart-button");

  let size = "";
let isHot = false;
let cart = [];

const quantity = document.querySelector(".quantity-input");

regularButton.addEventListener("click", () => {
  regularButton.classList.add("active");
  mediumButton.classList.remove("active");
  largeButton.classList.remove("active");
  size = "Regular";
  console.log('pilihan size', size);
});

mediumButton.addEventListener("click", () => {
  regularButton.classList.remove("active");
  mediumButton.classList.add("active");
  largeButton.classList.remove("active");
  size = "Medium";
  console.log('pilihan size', size);
});

largeButton.addEventListener("click", () => {
  regularButton.classList.remove("active");
  mediumButton.classList.remove("active");
  largeButton.classList.add("active");
  size = "Large";
  console.log('pilihan size', size);
});

iceButton.addEventListener("click", () => {
  iceButton.classList.add("active");
  hotButton.classList.remove("active");
  isHot = false;
  console.log('pilihan es', isHot ? "Hot" : "Ice");
});

hotButton.addEventListener("click", () => {
  iceButton.classList.remove("active");
  hotButton.classList.add("active");
  isHot = true;
  console.log('pilihan es', isHot ? "Hot" : "Ice");
});

// âœ… PERBAIKAN: Pindahkan logika membuat items ke dalam event listener buyButton
buybtn.addEventListener("click", () => {
  // Validasi pilihan
  if (!size) {
    alert("Please select a size!");
    return;
  }
  
  if (isHot === undefined || isHot === null) {
    alert("Please select hot or ice!");
    return;
  }

  const quantityValue = parseInt(quantity.value);
  if (isNaN(quantityValue) || quantityValue < 1) {
    alert("Please enter a valid quantity!");
    return;
  }

  // âœ… Buat objek items DI SINI, dengan nilai-nilai terkini
  const items = {
    id: productId,
    size: size,           // Sekarang ini akan memiliki nilai yang benar (Regular, Medium, atau Large)
    isHot: isHot,         // Sekarang ini akan memiliki nilai yang benar (true atau false)
    quantity: quantityValue
  };

  console.log('itemsnyaa', items); // Akan menampilkan items dengan nilai yang benar

  // Tambahkan items ke cart
  cart.push(items);

  // Simpan ke localStorage
  localStorage.setItem("cart", JSON.stringify(cart));

  alert(`${items.quantity}x ${items.size} ${items.isHot ? 'Hot' : 'Ice'} added to cart!`);

  // Redirect ke checkout jika diperlukan
  window.location.href = "products-checkout.html";
});




  } else {
    console.error("Product not found with ID:", productId);
  }
</script>
  </body>
</html>
